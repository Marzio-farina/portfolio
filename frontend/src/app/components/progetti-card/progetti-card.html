<div class="card-wrapper"
     (mouseenter)="play()" (mouseleave)="pause()"
     (click)="onCardClick()"
     [style.--hover-rotate]="hoverRotate()"
     [style.--hover-translate]="hoverTranslate()"
     [style.--hover-scale]="hoverScale()"
     [style.--hover-shadow]="hoverShadow()"
     [style.--hover-meta-bg]="hoverMetaBackgroundColor()"
     [style.--radial-gradient-color]="radialGradientColor()"
     role="button"
     tabindex="0"
     [attr.aria-label]="'Apri dettagli progetto: ' + progetto().title">
  @if (isAuthenticated() && isEditing()) {
    <button class="admin-x-btn" type="button" aria-label="Elimina progetto" (click)="onAdminButtonClick($event)">
      <span aria-hidden="true">Ã—</span>
    </button>
  }
  <div class="card" [class.no-video]="!progetto().video">
    <div class="media"><img class="poster" [src]="progetto().poster" alt="{{ progetto().title }}"><video #videoEl class="video" [src]="progetto().video" muted playsinline preload="metadata" loop></video></div>
  </div>
  <div class="meta">
    <h3 class="title">{{ progetto().title }}</h3>
    @if (isAuthenticated() && isEditing()) {
      <select 
        class="category-select" 
        [disabled]="changingCategory()"
        (change)="onCategoryChange($event)"
        (click)="$event.stopPropagation()"
        aria-label="Cambia categoria progetto">
        @for (cat of categories(); track cat.id) {
          <option 
            [value]="cat.id" 
            [selected]="cat.id === progetto().category_id">
            {{ cat.title }}
          </option>
        }
      </select>
    } @else {
      <p class="category">{{ progetto().category }}</p>
    }
    @if (progetto().technologies && progetto().technologies.length > 0) {
      <div class="technologies">
        @for (tech of progetto().technologies; track tech.id) {
          <span class="technology-tag">{{ tech.title }}</span>
        }
      </div>
    }
  </div>
</div>