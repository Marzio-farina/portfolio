<ul class="filter-list">
    @for (c of categories(); track c) {
        <li>
            <button
                type="button"
                [class.active]="c === selected()"
                [class.pending]="isPending(c)"
                [disabled]="isPending(c)"
                (click)="onSelect(c)"
                (mouseenter)="onMouseEnter(c)"
                (mouseleave)="onMouseLeave()">
                {{ c }}
                @if (canDelete() && c !== 'Tutti') {
                    <span 
                        class="filter-remove-btn"
                        [class.visible]="isRemoveVisible(c) && !isPending(c)"
                        [class.disabled]="isPending(c)"
                        (click)="onDelete($event, c)"
                        (mouseenter)="onMouseEnter(c)"
                        (mouseleave)="onMouseLeave()">Ã—</span>
                }
            </button>
        </li>
    }
    
    <!-- Button aggiungi categoria (visibile solo in edit mode) -->
    @if (canDelete()) {
        <li>
            <div
                class="filter-add-btn"
                [class.expanded]="isAddExpanded()"
                (click)="onAddCategory()">
                @if (!isAddExpanded()) {
                    <span class="filter-add-icon">+</span>
                } @else {
                    <input
                        type="text"
                        class="filter-add-input"
                        [value]="newCategoryValue()"
                        (input)="onCategoryInput($event)"
                        (keydown)="onCategorySubmit($event)"
                        (blur)="onCategoryBlur()"
                        (click)="$event.stopPropagation()"
                        placeholder="Nome categoria..."
                        maxlength="50">
                }
            </div>
        </li>
    }
</ul>