<div class="test-component w-full max-w-4xl mx-auto">
  <h2 class="text-lg sm:text-3xl font-bold text-center mb-2 sm:mb-8 px-2 sm:px-0">Carosello Testimonial</h2>
  
  <!-- Carousel Container -->
  <div class="relative w-full">
    <!-- Slides Container -->
    <div class="w-full h-auto rounded-lg overflow-visible relative max-w-full" id="carousel-container">
      <div 
        class="flex transition-transform duration-500 ease-in-out w-full"
        [style.transform]="getTransform()"
        style="width: 100%; max-width: 100%; overflow: visible;"
      >
        @for (testimonial of testimonials; track testimonial.id; let i = $index) {
          <div 
            class="carousel-slide px-0.5 sm:px-2"
            [style.min-width.%]="(100 / cardsPerView())"
          >
            <!-- Card Testimonial -->
            <div class="card">
              <div class="description_card">
                <h4>{{ testimonial.author }}</h4>
                @if (testimonial.rating) {
                  <div class="rating-container">
                    <div class="rating rating-sm">
                      <input type="radio" class="mask mask-star-2 bg-amber-400" [checked]="testimonial.rating >= 1" />
                      <input type="radio" class="mask mask-star-2 bg-amber-400" [checked]="testimonial.rating >= 2" />
                      <input type="radio" class="mask mask-star-2 bg-amber-400" [checked]="testimonial.rating >= 3" />
                      <input type="radio" class="mask mask-star-2 bg-amber-400" [checked]="testimonial.rating >= 4" />
                      <input type="radio" class="mask mask-star-2 bg-amber-400" [checked]="testimonial.rating >= 5" />
                    </div>
                  </div>
                }
                <p>{{ testimonial.text }}</p>
              </div>
            </div>
          </div>
        }
      </div>
    </div>

    <!-- Navigation Arrows -->
    <div class="absolute flex justify-between w-full px-2 transform -translate-y-1/2 left-0 right-0 top-1/2 z-20 pointer-events-none">
      <button 
        class="btn btn-sm sm:btn-md btn-circle glass text-xs sm:text-base pointer-events-auto shadow-lg"
        (click)="prevSlide()"
      >
        ❮
      </button>
      <button 
        class="btn btn-sm sm:btn-md btn-circle glass text-xs sm:text-base pointer-events-auto shadow-lg"
        (click)="nextSlide()"
      >
        ❯
      </button>
    </div>
  </div>

  <!-- Scrollbar personalizzata -->
  <div class="w-full px-2 sm:px-4 mt-2">
    <div class="h-2 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden">
      <div 
        class="h-full bg-amber-500 transition-all duration-300"
        [style.width.%]="((currentSlide() + 1) / maxSlides()) * 100"
      ></div>
    </div>
  </div>
</div>
