<!-- <div class="auth-wrapper"> -->
  <!-- <div class="card"> -->
    <div class="tabs" role="tablist" aria-label="Seleziona modalit√†">
      <button
        class="tab"
        [class.active]="mode() === 'login'"
        role="tab"
        [attr.aria-selected]="mode() === 'login'"
        (click)="mode.set('login')">
        Accedi
      </button>
      <button
        class="tab"
        [class.active]="mode() === 'register'"
        role="tab"
        [attr.aria-selected]="mode() === 'register'"
        (click)="mode.set('register')">
        Registrati
      </button>
    </div>

    @if (mode() === 'login') {
      <form [formGroup]="loginForm" (ngSubmit)="submitLogin()" novalidate>

        <div class="field">
          <label for="login-email">Email</label>
          <input id="login-email" type="email" formControlName="email" autocomplete="email" required />
          @if (showError(loginForm,'email','required')) {
            <small class="err">L'email √® obbligatoria.</small>
          }
          @if (showError(loginForm,'email','email')) {
            <small class="err">Formato email non valido.</small>
          }
        </div>

        <div class="field password">
          <label for="login-password">Password</label>
          <input
            [type]="showLoginPass() ? 'text':'password'"
            id="login-password"
            formControlName="password"
            autocomplete="current-password"
            required />
          <button
            type="button"
            class="eye"
            (click)="showLoginPass.set(!showLoginPass())"
            [attr.aria-pressed]="showLoginPass()">üëÅÔ∏è</button>
          @if (showError(loginForm,'password','required')) {
            <small class="err">La password √® obbligatoria.</small>
          }
        </div>

        <button class="primary" type="submit" [disabled]="loginForm.invalid || loading()">
          {{ loading() ? 'Accesso in corso‚Ä¶' : 'Accedi' }}
        </button>

        <p class="hint">
          Hai dimenticato la password?
          <a href="#" (click)="$event.preventDefault(); onForgotPassword()">Recupera</a>
        </p>
      </form>
    } @else {
      <form [formGroup]="registerForm" (ngSubmit)="submitRegister()" novalidate>

        <div class="field">
          <label for="reg-name">Nome</label>
          <input id="reg-name" type="text" formControlName="name" autocomplete="name" required />
          @if (showError(registerForm,'name','required')) {
            <small class="err">Il nome √® obbligatorio.</small>
          }
          @if (showError(registerForm,'name','minlength')) {
            <small class="err">Minimo 2 caratteri.</small>
          }
        </div>

        <div class="field">
          <label for="reg-email">Email</label>
          <input id="reg-email" type="email" formControlName="email" autocomplete="email" required />
          @if (showError(registerForm,'email','required')) {
            <small class="err">L'email √® obbligatoria.</small>
          }
          @if (showError(registerForm,'email','email')) {
            <small class="err">Formato email non valido.</small>
          }
        </div>

        <div class="field password">
          <label for="reg-password">Password</label>
          <input
            [type]="showRegPass() ? 'text':'password'"
            id="reg-password"
            formControlName="password"
            autocomplete="new-password"
            required />
          <button
            type="button"
            class="eye"
            (click)="showRegPass.set(!showRegPass())"
            [attr.aria-pressed]="showRegPass()">üëÅÔ∏è</button>
          @if (showError(registerForm,'password','required')) {
            <small class="err">La password √® obbligatoria.</small>
          }
          @if (showError(registerForm,'password','weakPassword')) {
            <small class="err">Almeno 8 caratteri con maiuscole, minuscole e numeri.</small>
          }
        </div>

        <div class="field">
          <label for="reg-confirm">Conferma password</label>
          <input
            [type]="showRegPass() ? 'text':'password'"
            id="reg-confirm"
            formControlName="confirm"
            required />
          @if (registerForm.errors?.['fieldMismatch'] && (registerForm.dirty || registerForm.touched)) {
            <small class="err">Le password non coincidono.</small>
          }
        </div>

        <div class="field checkbox">
            <input type="checkbox" id="reg-terms" formControlName="terms" />
            <label for="reg-terms">
                Accetto i <a href="#" (click)="$event.preventDefault()">termini</a> e l'informativa privacy
            </label>
            @if (showError(registerForm, 'terms', 'requiredTrue')) {
              <small class="err">
                Devi accettare i termini.
              </small>
            }

            @if (showError(registerForm,'terms','requiredTrue')) {
                <small class="err">Devi accettare i termini.</small>
            }
        </div>

        <button class="primary" type="submit" [disabled]="registerForm.invalid || loading()">
          {{ loading() ? 'Registrazione‚Ä¶' : 'Crea account' }}
        </button>
      </form>
    }

    @if (error()) {
      <p class="error-banner" role="alert">{{ error() }}</p>
    }
    @if (success()) {
      <p class="success-banner" role="status">{{ success() }}</p>
    }
  <!-- </div> -->
<!-- </div> -->