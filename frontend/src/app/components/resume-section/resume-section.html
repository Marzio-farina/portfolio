<section class="section">
  <header class="section__header">
    <button
      class="section__icon"
      type="button"
      (click)="toggle()"
      [attr.aria-label]="'Espandi o riduci sezione ' + title()"
      [attr.aria-expanded]="isOpen() ? 'true' : 'false'"
      [attr.aria-controls]="id() + '-panel'">
      <svg viewBox="0 0 24 24" aria-hidden="true" focusable="false">
        <path [attr.d]="iconPath"></path>
      </svg>
    </button>

    <h3 [id]="id() + '-title'" class="section__title-text">
      {{ title() }}
    </h3>
    
    <button
      class="section__title"
      type="button"
      (click)="toggle()"
      [attr.aria-expanded]="isOpen() ? 'true' : 'false'"
      [attr.aria-controls]="id() + '-panel'"
      [attr.aria-label]="'Espandi o riduci sezione ' + title()"
      [attr.aria-labelledby]="id() + '-title'">
      <span aria-hidden="true">{{ isOpen() ? '▼' : '▶' }}</span>
    </button>
  </header>

  <div 
    class="section__panel" 
    [id]="id() + '-panel'" 
    [class.is-open]="isOpen()"
    role="region"
    [attr.aria-labelledby]="id() + '-title'">
    <ol class="timeline">
      @for (it of items(); track it.title + '-' + it.years) {
        <li class="timeline__item">
          <app-timeline-item
            [title]="it.title"
            [years]="it.years"
            [description]="it.description">
          </app-timeline-item>
        </li>
      }
    </ol>
  </div>
</section>