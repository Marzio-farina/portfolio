<!-- Sistema di notifiche multiple -->
<app-notification 
  [notifications]="notifications()"
  [showMultiple]="showMultipleNotifications()"
  [mostSevereNotification]="getMostSevereNotification()">
</app-notification>

<h2 class="article-title">
  {{ title() }}
  @if (isAuthenticated()) {
    <button class="add-testimonial-btn" (click)="openAddAttestatoModal()" aria-label="Aggiungi attestato">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round">
        <line x1="12" y1="5" x2="12" y2="19"></line>
        <line x1="5" y1="12" x2="19" y2="12"></line>
      </svg>
    </button>
  }
</h2>

@if (loading()) {
  <div class="certificates">
    @for (i of [0,1,2,3,4,5]; track i) {
      <div class="attestato-card skeleton-card">
        <div class="skeleton cover" style="height:160px;"></div>
        <div class="meta" style="gap:8px; margin-top:12px;">
          <div class="skeleton h-4 w-1/2"></div>
          <div class="skeleton h-4 w-full"></div>
          <div class="skeleton h-4 w-3/4"></div>
        </div>
      </div>
    }
  </div>
}

@if (!loading() && errorMsg()) {
  <div class="state error">
    {{ errorMsg() }}
  </div>
}

<div class="certificates">
  @if (!loading() && !errorMsg()) {
    @for (a of attestati(); track a.id; let i = $index) {
      <app-attestati-card [attestato]="a" [priority]="i === 0"/>
    }
  }
</div>