<h2 class="article-title">{{ title() }}</h2>

<!-- Profile loading state -->
@if (profileLoading()) {
  <div class="state loading">Caricamento profilo…</div>
}

<!-- Profile error state -->
@if (!profileLoading() && profileError()) {
  <div class="state error">{{ profileError() }}</div>
}

<!-- Profile content -->
@if (!profileLoading() && !profileError() && profile()) {
  <!-- Bio riquadro per mobile -->
  <div class="bio-card-mobile" [class.expanded]="bioExpanded()" (click)="toggleBioExpansion()">
    <div class="bio-arrow bio-arrow--top-left">
      <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="4">
        <path d="M3 3v18M3 3h18"/>
      </svg>
    </div>
    <div class="bio-arrow bio-arrow--bottom-right">
      <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="4">
        <path d="M21 21H3M21 21V3"/>
      </svg>
    </div>
    <div class="bio-close" (click)="closeBioExpansion($event)">
      <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M18 6L6 18M6 6l12 12"/>
      </svg>
    </div>
    <div class="bio-read-more">Leggi</div>
    <div class="bio-content" [innerHTML]="profile()?.bio | nl2br"></div>
  </div>
  
  <!-- Bio normale per desktop -->
  <p class="bio-desktop" [innerHTML]="profile()?.bio | nl2br"></p>
}

<!-- Fallback content if no profile data -->
@if (!profileLoading() && !profileError() && !profile()) {
  <!-- Bio riquadro per mobile -->
  <div class="bio-card-mobile" [class.expanded]="bioExpanded()" (click)="toggleBioExpansion()">
    <div class="bio-arrow bio-arrow--top-left">
      <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="4">
        <path d="M3 3v18M3 3h18"/>
      </svg>
    </div>
    <div class="bio-arrow bio-arrow--bottom-right">
      <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="4">
        <path d="M21 21H3M21 21V3"/>
      </svg>
    </div>
    <div class="bio-close" (click)="closeBioExpansion($event)">
      <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M18 6L6 18M6 6l12 12"/>
      </svg>
    </div>
    <div class="bio-content">Sono Full Stack Developer e sviluppatore di applicazioni desktop con una forte attitudine analitica e una costante voglia di migliorarmi.

Nel corso degli anni ho collaborato con aziende IT e realtà specializzate in automazione, esperienze che mi hanno permesso di affrontare progetti complessi e di affinare una metodologia di lavoro precisa, orientata ai risultati e alla solidità del codice.

Amo tradurre le esigenze di un'idea o di un processo aziendale in soluzioni software funzionali, scalabili e affidabili, che semplificano la vita degli utenti e migliorano la produttività.

Prediligo la parte logica della programmazione, ma mi piace anche sperimentare nel design, curando l'aspetto visivo e l'esperienza d'uso dei miei progetti per renderli intuitivi e piacevoli da utilizzare.

Le tecnologie che utilizzo più frequentemente sono Laravel, Angular, .NET ed Electron, strumenti con cui costruisco applicazioni web e desktop su misura, capaci di adattarsi a diversi contesti e necessità.

Negli anni ho realizzato progetti personalizzati per aziende e privati, ottimizzando processi interni e sviluppando gestionali dedicati per rendere più efficiente il mio stesso lavoro e quello dei miei clienti.

Ogni nuovo progetto rappresenta per me una sfida stimolante e un'occasione per imparare qualcosa di nuovo — perché la mia filosofia è semplice ma incrollabile:

Non mollare mai.

Nel mio percorso continuo a ricercare l'equilibrio tra precisione tecnica e creatività, convinto che un software ben progettato debba essere non solo stabile e performante, ma anche piacevole da usare e da guardare.

Il mio obiettivo è quello di trasformare le idee in applicazioni concrete, funzionali e curate nei dettagli, portando valore reale a chi le utilizza ogni giorno.</div>
  </div>
  
  <!-- Bio normale per desktop -->
  <p class="bio-desktop">Sono Full Stack Developer e sviluppatore di applicazioni desktop con una forte attitudine analitica e una costante voglia di migliorarmi.
    Nel corso degli anni ho collaborato con aziende IT e realtà specializzate in automazione, esperienze che mi hanno permesso di affrontare progetti complessi e di affinare una metodologia di lavoro precisa, orientata ai risultati e alla solidità del codice.

    Amo tradurre le esigenze di un'idea o di un processo aziendale in soluzioni software funzionali, scalabili e affidabili, che semplificano la vita degli utenti e migliorano la produttività.
    Prediligo la parte logica della programmazione, ma mi piace anche sperimentare nel design, curando l'aspetto visivo e l'esperienza d'uso dei miei progetti per renderli intuitivi e piacevoli da utilizzare.

    Le tecnologie che utilizzo più frequentemente sono Laravel, Angular, .NET ed Electron, strumenti con cui costruisco applicazioni web e desktop su misura, capaci di adattarsi a diversi contesti e necessità.

    Negli anni ho realizzato progetti personalizzati per aziende e privati, ottimizzando processi interni e sviluppando gestionali dedicati per rendere più efficiente il mio stesso lavoro e quello dei miei clienti.
    Ogni nuovo progetto rappresenta per me una sfida stimolante e un'occasione per imparare qualcosa di nuovo — perché la mia filosofia è semplice ma incrollabile:

    Non mollare mai.

    Nel mio percorso continuo a ricercare l'equilibrio tra precisione tecnica e creatività, convinto che un software ben progettato debba essere non solo stabile e performante, ma anche piacevole da usare e da guardare.
    Il mio obiettivo è quello di trasformare le idee in applicazioni concrete, funzionali e curate nei dettagli, portando valore reale a chi le utilizza ogni giorno.</p>
}

<section>
    <h3 class="sub_article-title">Cosa sto facendo</h3>

    <!-- stati -->
    @if (loading()) {
        <div class="state loading">Caricamento…</div>
    }
    @if (!loading() && errorMsg()) {
        <div class="state error">{{ errorMsg() }}</div>
    }
    @if (!loading() && !errorMsg() && cards().length === 0) {
        <div class="state empty">Nessuna card disponibile.</div>
    }

    <div class="sub_article-card">
        @for (c of cards(); track c.id) {
            <app-what-i-do-card
                [title]="c.title"
                [description]="c.description"
                [icon]="c.icon ?? ''">
            </app-what-i-do-card>
        }
    </div>
</section>

<section class="testimonials">
  <h3 class="sub_article-title">Testimonianze</h3>

  @if (testimonialsLoading()) {
    <div class="state loading">Caricamento…</div>
  }
  @if (!testimonialsLoading() && testimonialsError()) {
    <div class="state error">{{ testimonialsError() }}</div>
  }
  @if (!testimonialsLoading() && !testimonialsError() && testimonials().length === 0) {
    <div class="state empty">Nessuna testimonianza disponibile.</div>
  }

  @if (!testimonialsLoading() && !testimonialsError() && testimonials().length > 0) {
    <div class="testimonial-wrapper">
      <div
        #carousel
        class="testimonial-track"
        (wheel)="onWheelToHorizontal($event)"
      >
        @for (t of testimonials(); track t.id) {
          <div class="testimonial-slide">
            <div class="testimonial-card-wrap">
              <div class="avatar-badge">
                <app-avatar [width]="56"></app-avatar>
              </div>
              <div class="testimonial-card">
                <app-testimonial-card
                  [author]="t.author"
                  [text]="t.text"
                  [role]="t.role ?? ''"
                  [company]="t.company ?? ''"
                  [rating]="t.rating"
                ></app-testimonial-card>
              </div>
            </div>
          </div>
        }
      </div>
    </div>
  }
</section>